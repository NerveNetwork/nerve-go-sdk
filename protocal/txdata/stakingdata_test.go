// @Title
// @Description
// @Author  Niels  2020/9/15
package txdata

import (
	"encoding/hex"
	"fmt"
	"github.com/niels1286/nerve-go-sdk/utils/seria"
	"strings"
	"testing"
)

func TestStaking_Parse(t *testing.T) {

	type args struct {
		reader *seria.ByteBufReader
	}
	tests := [100]struct {
		name    string
		args    args
		want    string
		wantErr bool
	}{}
	str := "0000000000000000000000000000000000000000000000000000000000000000010001ff6349e8be0291928e333e123a01e598e7f369e8090001000101,d00700000000000000000000000000000000000000000000000000000000000002000100ad14a57b438b594c21c052c3dd77af764e4757090001000101,a00f0000000000000000000000000000000000000000000000000000000000000500010d53d1296dd4f615260a9375509e95ee5523929a090001000101,70170000000000000000000000000000000000000000000000000000000000000900011a619f257fb02f38da1ecf6b5e866a32dc26b899090001000101,401f0000000000000000000000000000000000000000000000000000000000000100014d1eeb2c10f77915704915ff9f08e6f771518544090001000101,10270000000000000000000000000000000000000000000000000000000000000200012bd7c63cae51104c69649603f69468ffead48f9e090001000101,e02e0000000000000000000000000000000000000000000000000000000000000500018b9dfe0c978ca8ec687a16053b2f7c6dd6ea1fa4090001000101,b036000000000000000000000000000000000000000000000000000000000000090001d02d51521f6d636ef2e02d58e92fdbd643ea2264090001000101,803e000000000000000000000000000000000000000000000000000000000000010001f69ac892becb2c99df67d7ab8e1d7843347ef916090001000101,5046000000000000000000000000000000000000000000000000000000000000020001ef8760fc09b888bdfd9e36b0ce0f4483bed83938090001000101,204e000000000000000000000000000000000000000000000000000000000000050001b98a94095e7060c03d1b23914915fe01d40eb7a1090001000101,f055000000000000000000000000000000000000000000000000000000000000090001cc46309605dfd2ca0c42e3c817a639859b0ab797090001000101,c05d000000000000000000000000000000000000000000000000000000000000010001a6c744736d9b085f08301b7cade1eaea229feb74090001000101,906500000000000000000000000000000000000000000000000000000000000002000168972db01fd270ce40e5ab0ef627c6ec6da3c384090001000101,606d000000000000000000000000000000000000000000000000000000000000050001ad65f27be60c2e404011e1b8b1de83a46ab41017090001000101,3075000000000000000000000000000000000000000000000000000000000000090001da35863c69969a360c335bcef3a908212217abf0090001000101,007d00000000000000000000000000000000000000000000000000000000000001000192997b27a6333f56c5e567956a0fe2bcc5cbb342090001000101,d0840000000000000000000000000000000000000000000000000000000000000200011f65bcacb7dff42ac5d3cf7740ded3f31e1e2bc6090001000101,a08c0000000000000000000000000000000000000000000000000000000000000500013b05f2b31e6aeb7a674db836b38c4f80fc04a4a5090001000101,70940000000000000000000000000000000000000000000000000000000000000900012f2fc9497b616f5bc1aefb7a799e045b9120486c090001000101,409c0000000000000000000000000000000000000000000000000000000000000100013c9a1e094765fa39a7fe4bedd7a4a762423c9f3d090001000101,10a40000000000000000000000000000000000000000000000000000000000000200010fb2dd02adac80fff004932187be0c7797ce0ae7090001000101,e0ab000000000000000000000000000000000000000000000000000000000000050001532f9a93a7fdcf998bebf09bb06f37f5196f5862090001000101,b0b30000000000000000000000000000000000000000000000000000000000000900012ad882946a5c70425bddf53608e7daf81f7a460f090001000101,80bb00000000000000000000000000000000000000000000000000000000000001000187e3cbcc98443d1cb398b0c4478530063c3ae8e2090001000101,50c3000000000000000000000000000000000000000000000000000000000000020001eca3d6dbff6fa2fd69bedab0d7be99eaa5bad28b090001000101,20cb0000000000000000000000000000000000000000000000000000000000000500016d6fa357956f4dd9bb7e8d03b2be19be82ea1b80090001000101,f0d2000000000000000000000000000000000000000000000000000000000000090001314193bcd8ac7b0d55d6d4de61122b12fb2e1ff3090001000101,c0da0000000000000000000000000000000000000000000000000000000000000100017a70a447c5f718671307c343b10277bdac4d4b6b090001000101,90e2000000000000000000000000000000000000000000000000000000000000020001ecfaf6c5bad6a03008e1b38b952cea6ff378b928090001000101,60ea0000000000000000000000000000000000000000000000000000000000000500016ac3cc3b85a04d68bea77889877681570c9f8b1b090001000101,30f2000000000000000000000000000000000000000000000000000000000000090001c375d67532a0fdfabde8fecb8ea9e34514c0d110090001000101,00fa0000000000000000000000000000000000000000000000000000000000000100017ece7b8dee3aa025ba8aa017219c19c7b7ab17b1090001000101,d00101000000000000000000000000000000000000000000000000000000000002000110f5c4741c28cb057282e4b3a22fd0303cf79b5c090001000101,a009010000000000000000000000000000000000000000000000000000000000050001ed806b4ad5e5e61efa66dcb42035905c3de6fef2090001000101,7011010000000000000000000000000000000000000000000000000000000000090001dedbe9c3ee9f4f48d7e8b7ae3d2ace3633f44468090001000101,40190100000000000000000000000000000000000000000000000000000000000100011f97b0fa1ce9287954e096c04d4dabacfffc5bae090001000101,1021010000000000000000000000000000000000000000000000000000000000020001274309ebafc6a893286cf2c2f8bec72a8defe69a090001000101,e02801000000000000000000000000000000000000000000000000000000000005000180db1577078e5e0b3c13e8f74bfffd98d0895418090001000101,b030010000000000000000000000000000000000000000000000000000000000090001aec2c8711a8fe8d31c3ec7d0bc941ce8a018fa08090001000101,8038010000000000000000000000000000000000000000000000000000000000010001d2231d57ed2c5ce27e9798280a2f1b20485e0fca090001000101,50400100000000000000000000000000000000000000000000000000000000000200017e730b8a9558611129e396a5664e1d0759a1fc9d090001000101,20480100000000000000000000000000000000000000000000000000000000000500014a7e36583a549f6cfaf00c24f1907654356a312d090001000101,f04f010000000000000000000000000000000000000000000000000000000000090001cbd8369a7f06d1bbb61c1ee223ac08dc476b15a9090001000101,c0570100000000000000000000000000000000000000000000000000000000000100011a04ffe3b63c7b9c88c55dc7149b3f950968cf71090001000101,905f01000000000000000000000000000000000000000000000000000000000002000145313d130a5691cc398bdfdfd089636b9c1fd5a3090001000101,6067010000000000000000000000000000000000000000000000000000000000050001d721d41334af4be3cae6ca8031ea6c472a182cf4090001000101,306f010000000000000000000000000000000000000000000000000000000000090001bf7804f8efd0f6552c97e228f33fe41b17862523090001000101,0077010000000000000000000000000000000000000000000000000000000000010001ce7f2c1bb7fe61515cba0bd2f7c3fdd63cff98fc090001000101,d07e010000000000000000000000000000000000000000000000000000000000020001c04900ab6db550d801d0eb281c8f4c383491176e090001000101,a086010000000000000000000000000000000000000000000000000000000000050001d9842c497097c0746d8995b9f2a28784ab2cbfe1090001000101,708e010000000000000000000000000000000000000000000000000000000000090001738113157220fc322cd63e824513fe05f7083887090001000101,409601000000000000000000000000000000000000000000000000000000000001000176daf22f14d868ade1f99dc13a34c5c1888b9f30090001000101,109e010000000000000000000000000000000000000000000000000000000000020001df3c181f16d040d27469eb3d27aaec02a22b57f8090001000101,e0a501000000000000000000000000000000000000000000000000000000000005000183428d6df2bd25f7e9aecf768f59a42b837e46a5090001000101,b0ad010000000000000000000000000000000000000000000000000000000000090001abebfa1296d3ba8977418144d580a274b9d9490e090001000101,80b50100000000000000000000000000000000000000000000000000000000000100010c048b5fd01de2231ad424059a7b9e5fc466b92a090001000101,50bd01000000000000000000000000000000000000000000000000000000000002000197cad8515d615067f6b25a47993ee4a531d3a22e090001000101,20c50100000000000000000000000000000000000000000000000000000000000500010bfde64aba610c2a92292f78e7e6f2f5f53685fc090001000101,f0cc0100000000000000000000000000000000000000000000000000000000000900012749e640adb824383dc1cdfa1412772f24680a04090001000101,c0d4010000000000000000000000000000000000000000000000000000000000010001c2251ad3f598c3311af863e5301a4b5761cc666b090001000101,90dc01000000000000000000000000000000000000000000000000000000000002000166a1a89ef0369b2ac6492c6aecdc38bd6dd91dbc090001000101,60e4010000000000000000000000000000000000000000000000000000000000050001e737e391ca489e44232c8205b90b5d5a44a8844a090001000101,30ec010000000000000000000000000000000000000000000000000000000000090001744fb9b51540ec729f8720e339d2db65a5c22c5f090001000101,00f40100000000000000000000000000000000000000000000000000000000000100014159b58e76f31a501298a1c159f949d8de5c1664090001000101,d0fb010000000000000000000000000000000000000000000000000000000000020001c6f02e05d47f12a6cc5ca2cedac9e5a62042faf3090001000101,a003020000000000000000000000000000000000000000000000000000000000050001aa0aa34b2cc791376ed537f4807a079045c43aa1090001000101,700b020000000000000000000000000000000000000000000000000000000000090001fc03afbfa06ec58128a7c386530b647c0151eb6c090001000101,4013020000000000000000000000000000000000000000000000000000000000010001aa8d568d19308b09fe21ac4a00e7490826fb89a3090001000101,101b0200000000000000000000000000000000000000000000000000000000000200015a65f355368f8661c360c304d4ee18a5a0b8f404090001000101,e022020000000000000000000000000000000000000000000000000000000000050001d2fbf8fdabedd0f9302b94e47958608c50f4544e090001000101,b02a02000000000000000000000000000000000000000000000000000000000009000137af9273987efb7f36e49a8e39f92acd2108a995090001000101,80320200000000000000000000000000000000000000000000000000000000000100019e763501c001ce7643efb95abd0c6fb208e999cb090001000101,503a020000000000000000000000000000000000000000000000000000000000020001515e92351d510250011e0574b328d23c4e5de091090001000101,2042020000000000000000000000000000000000000000000000000000000000050001b3e5af86cb340d1fbf64c0e9b737ad1f4434addb090001000101,f0490200000000000000000000000000000000000000000000000000000000000900012fe30a6ab3b8d4baf4a793b0a5603c38b156d212090001000101,c0510200000000000000000000000000000000000000000000000000000000000100012c705dac3a8a9034fc4a899515f6f153dd94d193090001000101,90590200000000000000000000000000000000000000000000000000000000000200010c1187a138fd3a05732bd02a09b0d936bae61ccb090001000101,60610200000000000000000000000000000000000000000000000000000000000500018089cc6d8236781c2b02f9e4729c5b62c9c21a69090001000101,3069020000000000000000000000000000000000000000000000000000000000090001b835a939c0d3e6804edffa848469a03396b75196090001000101,00710200000000000000000000000000000000000000000000000000000000000100019ea3878ca28c0bade52b95229b1651efd6a2ab9f090001000101,d078020000000000000000000000000000000000000000000000000000000000020001c98d52c15e0c8ad53ed41cc0d101673cac9a8937090001000101,a08002000000000000000000000000000000000000000000000000000000000005000123c8f3c7dbde27792a740f27f9e511ab2564222d090001000101,70880200000000000000000000000000000000000000000000000000000000000900015dc5fa833bcc2ef0afe62e85830428772e621589090001000101,4090020000000000000000000000000000000000000000000000000000000000010001e8fe928309cb18b4dc1eb0945a3d1bc461802752090001000101,10980200000000000000000000000000000000000000000000000000000000000200011defd0c74f3332ee5237f6159547fd3221f3da49090001000101,e09f02000000000000000000000000000000000000000000000000000000000005000194fcf5f7dfdb8b9f25ae9405f81c96c69b7d6496090001000101,b0a70200000000000000000000000000000000000000000000000000000000000900018cd38b712b6cbe4eecf98ef162c93bcd541a16c3090001000101,80af020000000000000000000000000000000000000000000000000000000000010001c9855b94104b15b2f082e3fe2ab0ec77e2e44086090001000101,50b7020000000000000000000000000000000000000000000000000000000000020001d74cf83ab6412256ef2a3bf1bb75b995198bc303090001000101,20bf02000000000000000000000000000000000000000000000000000000000005000114778ade14a320b50a842e7993abb0c16324f13b090001000101,f0c6020000000000000000000000000000000000000000000000000000000000090001377b53cd0f87c368f69115c453304419d94aac4f090001000101,c0ce0200000000000000000000000000000000000000000000000000000000000100012ec9363426b05fa2e028846802abc5c9199c1dff090001000101,90d6020000000000000000000000000000000000000000000000000000000000020001a89104946929dae95d83306577f7bbdd9df2578f090001000101,60de020000000000000000000000000000000000000000000000000000000000050001906081ccd3cdde8788182feaaac86e1a2907e475090001000101,30e6020000000000000000000000000000000000000000000000000000000000090001ac10e494712762833420e10e2dfc52f3f6b1500d090001000101,00ee020000000000000000000000000000000000000000000000000000000000010001423ebe3a4888cdf67379ee771a1bf331db21b719090001000101,d0f5020000000000000000000000000000000000000000000000000000000000020001f4ce240ec5c43d7050d289c9a60ed7ea25b07273090001000101,a0fd0200000000000000000000000000000000000000000000000000000000000500013caaf7cbb9d73549302483d467051d00ae182c48090001000101,70050300000000000000000000000000000000000000000000000000000000000900016e6afc5792714a429b1de604b67ad9c35f3e92d9090001000101"
	hexArr := strings.Split(str, ",")
	for i := 0; i < 100; i++ {
		bytes, _ := hex.DecodeString(hexArr[i])
		tests[i] = struct {
			name    string
			args    args
			want    string
			wantErr bool
		}{"test" + fmt.Sprintf("%d", i), args{reader: seria.NewByteBufReader(bytes, 0)}, hexArr[i], false}
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			a := &Staking{}

			if err := a.Parse(tt.args.reader); (err != nil) != tt.wantErr {
				t.Errorf("Parse() error = %v, wantErr %v", err, tt.wantErr)
			}
			bytes, err := a.Serialize()
			if (err != nil) != tt.wantErr {
				t.Errorf("Parse() error = %v, wantErr %v", err, tt.wantErr)
			}
			got := hex.EncodeToString(bytes)
			if got != tt.want {
				t.Errorf("Parse() got = %v, want %v", got, tt.want)
			}
		})
	}
}
