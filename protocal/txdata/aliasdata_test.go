// @Title
// @Description
// @Author  Niels  2020/9/15
package txdata

import (
	"encoding/hex"
	"fmt"
	"github.com/niels1286/nerve-go-sdk/utils/seria"
	"strings"
	"testing"
)

func TestAlias_Parse(t *testing.T) {

	type args struct {
		reader *seria.ByteBufReader
	}
	tests := [100]struct {
		name    string
		args    args
		want    string
		wantErr bool
	}{}
	str := "170100016f5bc7226442e0fba320a399124d36a10dbefb6909616c69617364646464,170200014aa414173776db7797451f8574066f98f0313a0409616c69617364646464,170500012320eb21f0964ea05d1b5eaf1dc493d63a569d3f09616c69617364646464,17090001a27be7b2e0eacabb8e340b533be88125f8c91a7809616c69617364646464,17010001fabee60c3da376cfd89031332bd1e0fc69739f3809616c69617364646464,170200013e28da43782b7a108ce55cf5e2e02eeec85568b609616c69617364646464,170500014c88db2df5715cc6c0005fb33bf65c8c1c70d03e09616c69617364646464,17090001e4a72832dcf6e2f2c7550c3a9d5e3a376186a07b09616c69617364646464,17010001550530d2eeb5c7ed88ad6b42869588d7531211cf09616c69617364646464,17020001544cb70c8ef99dc6da373d36714619d30392e2af09616c69617364646464,170500017ae5f43ecef9b43ade7395afee2351e2735c6dac09616c69617364646464,17090001b38c83bd74f00cbf5287079de975097b805d0c1609616c69617364646464,17010001f355605f81ef0d14c9e2367e0cbf05bb5fd930f809616c69617364646464,17020001cd3ed41aaee03c9f834d3745c2c27311e929457309616c69617364646464,17050001c069373f2903e4a1cff7d55562d86777414b473e09616c69617364646464,17090001555f421c3ef08451def2bbcc3f784a739bc8e15809616c69617364646464,17010001a0beef495501d0f24e8a77d2b8570449b22d3d6b09616c69617364646464,17020001eda573f0038824e3df502e077140c87e75d9ee5509616c69617364646464,17050001249688778087e6709df2e955f561f22dbf20345309616c69617364646464,17090001124ae20edba86aa498d8a7b4af8de0b8db7e72c109616c69617364646464,1701000151bf9ce21e32cf802f0dde24766660a8eb3d4bdc09616c69617364646464,17020001704781c92e46a2fdd5e758467dbfee9cb181b9bd09616c69617364646464,170500010c198520ba1696d270a7e553540da8f991c2863b09616c69617364646464,17090001feff76b7fefad443782b9a401c9040b058733ce209616c69617364646464,17010001d17c13c5a22e41472d67869ff113d093be2ee2c209616c69617364646464,17020001c63871a70903179b9e378bba267d9ddfa8e018ad09616c69617364646464,17050001a6e8d2b703fb4bdd55df0f4c8a89ca3f673553f609616c69617364646464,17090001b0389595f888f2011cba33fee26c0d80ab47f27e09616c69617364646464,170100012983720280ad5ccd47f247f632dc05477f771fdf09616c69617364646464,1702000142734f1622089607bbb1f001b714aae67b1d24e209616c69617364646464,170500014060a1b6c1547b504e8baccf9a2cfc7b0605a03a09616c69617364646464,17090001940dff00e777e805cb92e76450dec1993fc7a93c09616c69617364646464,170100016cf5bffdac654e40e022e2b5a5876cf5ce07848309616c69617364646464,17020001d86b4ee254adb530e5771f9622415c01da508f1409616c69617364646464,170500013cf3e0077b443711f7e0c608383bd0e735c23f0809616c69617364646464,170900010dfb848ec28edc481da98007c372afedc29a6a9709616c69617364646464,17010001680b2aef62f9a5d15810c756d1b7d2437cd40e2609616c69617364646464,170200015b1aff7cb7c6a80bbd91d7015274f5fa72b1f91709616c69617364646464,1705000188022154414cb0fd5fe0e91355dabdc7a4e2fd0c09616c69617364646464,170900018af5f8ade16c440ff565f2d1d02abe12b780697909616c69617364646464,1701000119a74b46a8eff5bd0c822440e1e51e67b489924f09616c69617364646464,170200015951784fe5acbde4c19fd8963cea1a3763b0682c09616c69617364646464,17050001445c7b214cccbed931a738c9f7789df21386ea4009616c69617364646464,17090001d1c8fd9c68d798bd93eb318cc7032ea41037d2f109616c69617364646464,17010001728565a92624d42f6a4a380ee80efb42e3627b2509616c69617364646464,170200015e16493d30f749ef401589d7ded02c69afa2645709616c69617364646464,1705000106f316e8b652ea355b9b77b91ac304573a3785a109616c69617364646464,1709000175b4c9ca3d07ce3a59a1145282ea6675768f862409616c69617364646464,17010001a957ae727db2381261df4c0b65e29742ffdf00fb09616c69617364646464,17020001d4cb6cc058fb014215e68dedc6e3787258e31e3309616c69617364646464,17050001734e42d52efdb35c009b91b7130d7f1cf3cb150409616c69617364646464,170900011f51d5f9d4f6a1b0c305e7efafc223b5c271cfbf09616c69617364646464,17010001192722259d1e1337016a8863ff11da8caee50dd009616c69617364646464,1702000161f6f4f82ef1c8a456a98caf88e3f716bc90543809616c69617364646464,1705000161ec3829d0001d7f042c48ece2c99a75ae62c2d009616c69617364646464,17090001dba221593885cc0e94abd505c137266210b5daa909616c69617364646464,17010001b0df624f21a06cd438730059690d07f90ec8361a09616c69617364646464,17020001cdb7295f8e2f129d39255ef4a9aec8b5becc443909616c69617364646464,170500016fd2a7110f45c4d35a282ef5e59211e28e93c66c09616c69617364646464,1709000173048fd1584f4c6934bd96419de7afd65fe8608009616c69617364646464,170100016d5f765be441859401094fd36a4990798cc7bcf309616c69617364646464,170200011a899f932c559f8d2b6cb2895ae1660810a7c0b209616c69617364646464,170500015161610def72db00596468372f4219ccbd292b8209616c69617364646464,1709000120228305e09c71fc595aa89da8af89bf9053e2ce09616c69617364646464,1701000179c8be7ed65808306f5be245abe6954c0fff1fcd09616c69617364646464,1702000175bb03dec4938e4b84966b558e968ff91a834bbb09616c69617364646464,17050001e6fc2e4f8b6f98f231a9a8eb80282df72d23ecf309616c69617364646464,1709000135327eefca7c86bd5af2e1e3ad6daf349e4a120d09616c69617364646464,170100015d13379ad50f1fbf26344b13e4e807c60efa63d309616c69617364646464,17020001891bf7aa7aa77efa955292b5ea73ce1347ccc8ab09616c69617364646464,170500010022764e7edc3f4416b0804eb9755946570de60909616c69617364646464,170900017d56edd8d4173b4aa11e51b24b2e2272c746645309616c69617364646464,17010001d2e423302c53ba9b89fd46aa6e48b5465167e52609616c69617364646464,1702000111c9eb190b0ac7623d42ff58c592a95d43b3877f09616c69617364646464,17050001c6662ed6b8d617f84e226957a1f1b402253b8ded09616c69617364646464,170900016079196efa851e452eee0ae288978348ced0307a09616c69617364646464,17010001b8a5803cc97150ea7f0a0866f9edf477beda586c09616c69617364646464,17020001ab7bb82d29909cd1baf00a8128bad591a7eb4f4109616c69617364646464,170500016fd68f05bb7714e2a6019620822be1ec51d47adc09616c69617364646464,170900016e82337af8954ba9e8b2337984a8a04d36d3ad1a09616c69617364646464,170100013ab3529f1cd3a380fcac3f1ee9e59a56b369d07909616c69617364646464,170200018561d6ff2494158c3d2385712db42fc1b38af93a09616c69617364646464,170500010ca3e569b898d284299563ae155cadedd32da7c009616c69617364646464,17090001d5299bef3801b3cf56be91762517d26618190bb809616c69617364646464,170100014c02673c3da98ed415280485c4fb226f8649beec09616c69617364646464,17020001e2ad0fd05b1f872e192fe23e9758f91547763bcd09616c69617364646464,17050001592797ee63321dc0151086dd86fb66235fff04c209616c69617364646464,170900012ce3e0fe71862999bcaefbca5f4388747f8123aa09616c69617364646464,17010001055b6f79eb81ea5a01a5e310f4f56d86b54b3d8c09616c69617364646464,1702000186fefe08dd98c5128bf5bc7c33af5789df1a4aa109616c69617364646464,170500010272bad9e85e252aef739642778b333daa788d8009616c69617364646464,17090001ad263f97f479cc541e15e7122b40566606fe240509616c69617364646464,170100011b62402d79a23fdb780c3c46116828a57bdb94ba09616c69617364646464,17020001ff74f4ff5f9a39dd9545145bcd5fac9a9093617e09616c69617364646464,1705000128c4047ae06c6976529b9db20129acf9da1d43f109616c69617364646464,1709000133b275a1c5033742fcc6721a20ba3ea91aeed32f09616c69617364646464,17010001154408d0414a2a5b8a2d07b6078bd4ac7af3ccda09616c69617364646464,1702000126ccca06bf939e408bbaf61986bdcb163022db1509616c69617364646464,1705000136d0200974fbf2a3149dcb6d97a11701edd36d2109616c69617364646464,1709000103bdc0b6f7ad518e772f80e01d0d5b041ca32ac409616c69617364646464"
	hexArr := strings.Split(str, ",")
	for i := 0; i < 100; i++ {
		bytes, _ := hex.DecodeString(hexArr[i])
		tests[i] = struct {
			name    string
			args    args
			want    string
			wantErr bool
		}{"test" + fmt.Sprintf("%d", i), args{reader: seria.NewByteBufReader(bytes, 0)}, hexArr[i], false}
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			a := &Alias{
				Address: nil,
				Alias:   "",
			}
			if err := a.Parse(tt.args.reader); (err != nil) != tt.wantErr {
				t.Errorf("Parse() error = %v, wantErr %v", err, tt.wantErr)
			}
			bytes, err := a.Serialize()
			if (err != nil) != tt.wantErr {
				t.Errorf("Parse() error = %v, wantErr %v", err, tt.wantErr)
			}
			got := hex.EncodeToString(bytes)
			if got != tt.want {
				t.Errorf("Parse() got = %v, want %v", got, tt.want)
			}
		})
	}
}
